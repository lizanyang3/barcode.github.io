<!DOCTYPE html>
<html lang="zh-CN">
<head>
    ...
    <link rel="icon" href="logo.png" type="image/png">
    ...
</head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>BarCode｜矢量条形码实时生成器</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="Description" content="Barcode Generator online in real-time. Supporting multiple barcodes including CODE128, EAN, UPC, CODE39, ITF, MSI and pharmacode">

    <link rel="stylesheet" type="text/css" href="css/root.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/rangeslider.css">

    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
    <script src="js/rangeslider.min.js"></script>
    <script src="js/jqColorPicker.min.js"></script>
    <script src="js/script.js"></script>
    <script src="https://lf1-cdn-tos.bytegoofy.com/obj/iconpark/icons_29394_9.26514398f4a110c4bad51488a9463945.js"></script>

    <style>
    @media print {
        body * { visibility: hidden !important; }
        .barcode-container, .barcode-container * {
            visibility: visible !important;
        }
        .barcode-container {
            position: absolute !important;
            left: 0; top: 0;
            width: 100vw;
            background: #fff !important;
            text-align: center;
            z-index: 9999;
        }
        .print-barcode-btn, #invalid {
            display: none !important;
        }
        #qr-container {
            margin-top: 0 !important;
            margin-bottom: 0 !important;
        }
    }
    </style>
</head>
<body>
<div id="main">
    <div class="container">
        <div id="title">
            <iconpark-icon class="logo" name="logo" size="130px"></iconpark-icon>
            <p>矢量条形码</br>实时生成器</p>
        </div>
    </div>
    <div class="barcode-container">
        <svg id="barcode"></svg>
        <span id="invalid" style="display: none;">此条形码类型不支持该数据！</span>
        <div style="margin-top:16px; display:none;" id="qr-container"></div>
    </div>
    <div class="container">
        <div class="row">
            <input id="userInput" type="text" value="Example 1234" placeholder="Barcode">
            <select id="barcodeType" title="CODE128">
                <option value="CODE128">CODE128 自动</option>
                <option value="CODE128A">CODE128 A</option>
                <option value="CODE128B">CODE128 B</option>
                <option value="CODE128C">CODE128 C</option>
                <option value="EAN13">EAN13</option>
                <option value="EAN8">EAN8</option>
                <option value="UPC">UPC</option>
                <option value="CODE39">CODE39</option>
                <option value="ITF14">ITF14</option>
                <option value="ITF">ITF</option>
                <option value="MSI">MSI</option>
                <option value="MSI10">MSI10</option>
                <option value="MSI11">MSI11</option>
                <option value="MSI1010">MSI1010</option>
                <option value="MSI1110">MSI1110</option>
                <option value="pharmacode">药物码</option>
                <option value="QR">二维码 (QR Code)</option>
            </select>
        </div>
        <div class="row">
            <div class="column">
                <p>条码宽度<span id="bar-width-display">2</span></p>
                <input id="bar-width" type="range" min="1" max="4" step="1" value="2">
            </div>
            <div class="column">
                <p>条码高度<span id="bar-height-display">100</span></p>
                <input id="bar-height" type="range" min="10" max="150" step="5" value="100">
            </div>
            <div class="column">
                <p>条码边距<span id="bar-margin-display">10</span></p>
                <input id="bar-margin" type="range" min="0" max="25" step="1" value="10">
            </div>
        </div>
        <div class="row">
        <div class="column">
            <p>背景颜色</p>
            <input id="background-color" class="form-control color" value="#FFFFFF">
        </div>
        <div class="column">
            <p>线条颜色</p>
            <input id="line-color" class="form-control color" value="#000000">
        </div>
        <div class="column">
            <p>显示文字</p>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn">
                    <input type="radio" class="display-text btn-primary" name="displayText" value="true" style="display: none;" checked>
                    <iconpark-icon name="preview-open" stroke-width="6" class="icon"></iconpark-icon>
                </label>
                <label class="btn">
                    <input type="radio" class="display-text" name="displayText" value="false" style="display: none;">
                    <iconpark-icon name="preview-close" class="icon"></iconpark-icon>
                </label>
            </div>
        </div>
    </div>
    <div id="font-options">
        <div class="row">
            <div class="row">
                <p>字体</p>
                <div class="center-text">
                    <select class="form-control" id="font" style="font-family: sans-serif">
                        <option value="monospace" style="font-family: monospace" selected="selected">Monospace</option>
                        <option value="sans-serif" style="font-family: sans-serif">Sans-serif</option>
                        <option value="serif" style="font-family: serif">Serif</option>
                        <option value="cursive" style="font-family: cursive">Cursive</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <p>文本对齐</p>
                <div class="btn-group" data-toggle="buttons">
                    <label class="btn">
                        <input type="radio" class="text-align" name="textAlignment" value="left" checked style="display: none;">
                        <iconpark-icon name="align-text-left" class="icon"></iconpark-icon>
                    </label>
                    <label class="btn btn-primary">
                        <input type="radio" class="text-align" name="textAlignment" value="center" style="display: none;">
                        <iconpark-icon name="align-text-center" class="icon"></iconpark-icon>
                    </label>
                    <label class="btn">
                        <input type="radio" class="text-align" name="textAlignment" value="right" style="display: none;">
                        <iconpark-icon name="align-text-right" class="icon"></iconpark-icon>
                    </label>
                </div>
            </div>
            <div class="row">
                <p>字体选项</p>
                <div class="btn-group" role="toolbar">
                    <label class="btn font-widget">
                        <input type="checkbox" class="font-option" value="bold" style="display: none;">
                        <iconpark-icon name="text-bold" class="icon"></iconpark-icon>
                    </label>
                    <label class="btn font-widget">
                        <input type="checkbox" class="font-option" value="italic" style="display: none;">
                        <iconpark-icon name="text-italic" class="icon"></iconpark-icon>
                    </label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="column">
                <p>字体大小<span id="bar-fontSize-display">20</span></p>
                <input id="bar-fontSize" type="range" min="8" max="36" step="1" value="20">
            </div>
            <div class="column">
                <p>与条码间距<span id="bar-text-margin-display">0</span></p>
                <input id="bar-text-margin" type="range" min="-15" max="40" step="1" value="0">
            </div>
        </div>
    </div>
    <div class="column">
        <p>保存/打印</p>
        <div class="row">
            <button type="button" class="download-svg btn" value="true">下载</button>
            <button type="button" class="print-barcode-btn btn" value="true">打印</button>
        </div>
    </div>
</div>
<script src="js/saveSvg.js"></script>
<script>
function renderCode() {
    var type = document.getElementById('barcodeType').value;
    var text = document.getElementById('userInput').value;
    var qrContainer = document.getElementById('qr-container');
    var barcode = document.getElementById('barcode');
    if (type === 'QR') {
        barcode.style.display = 'none';
        document.getElementById('invalid').style.display = 'none';
        qrContainer.style.display = "block";
        qrContainer.innerHTML = "";
        if (text.trim() !== "") {
            new QRCode(qrContainer, {
                text: text,
                width: 200,
                height: 200,
                colorDark : "#000",
                colorLight : "#fff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }
    } else {
        barcode.style.display = '';
        qrContainer.style.display = "none";
        qrContainer.innerHTML = "";
        try {
            JsBarcode("#barcode", text, { format: type });
            document.getElementById('invalid').style.display = 'none';
        } catch(e) {
            document.getElementById('invalid').style.display = '';
        }
    }
}
document.getElementById('barcodeType').addEventListener('change', renderCode);
document.getElementById('userInput').addEventListener('input', renderCode);

document.querySelector('.print-barcode-btn').onclick = function() {
    window.print();
};

// 条码参数功能和事件监听在现有 script.js 控制，无需重复
window.onload = renderCode;
</script>
</body>
</html>
